<!DOCTYPE html>
<!-- saved from url=(0135)https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa1/01_ymp%C3%A4rist%C3%B6n_pystytys/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Joni Korpihalkola">
    <link rel="shortcut icon" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/img/favicon.ico">
    <title>Ympäristön pystytys — Syväoppiminen</title>
    <link rel="stylesheet" href="./Ympäristön pystytys — Syväoppiminen_files/css">
    <link rel="stylesheet" href="./Ympäristön pystytys — Syväoppiminen_files/fira_code.css">
    <link rel="stylesheet" href="./Ympäristön pystytys — Syväoppiminen_files/all.css">
    <link rel="stylesheet" href="./Ympäristön pystytys — Syväoppiminen_files/v4-shims.css">
    <link rel="stylesheet" href="./Ympäristön pystytys — Syväoppiminen_files/theme.css">
    <link rel="stylesheet" href="./Ympäristön pystytys — Syväoppiminen_files/github.min.css">
    <link rel="stylesheet" href="./Ympäristön pystytys — Syväoppiminen_files/extra.css">
    <script src="./Ympäristön pystytys — Syväoppiminen_files/jquery-2.1.1.min.js.download"></script>
    <script src="./Ympäristön pystytys — Syväoppiminen_files/highlight.min.js.download"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script> 
</head>

<body ontouchstart="">
    <div id="container">
        <aside>
            <div class="home">
                <div class="title">
                    <button class="hamburger"></button>
                    <a href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/" class="site-name"> Syväoppiminen</a>
                </div>
                <div class="search">
                    <div role="search">
    <form id="rtd-search-form" class="wy-form" action="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/search.html" method="get">
        <input type="text" name="q" placeholder="Search docs" title="Type search term here">
    </form>
</div>
                </div>
            </div>
            <nav class="nav">
                <ul class="root">
                    <li class="toctree-l1"><a class="nav-item" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/">Kurssin tiedot</a></li>
                    <li class="toctree-l1"><button class="section nav-item">Osa 1</button>
<ul class="subnav">
    <li class="toctree-l2 current"><a class="nav-item current" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa1/01_ymp%C3%A4rist%C3%B6n_pystytys/">Ympäristön pystytys</a>
<ul class="subnav">
<li class="toctree-l3"><a class="nav-item toc" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa1/01_ymp%C3%A4rist%C3%B6n_pystytys/#omalla-koneella">Omalla koneella</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa1/01_ymp%C3%A4rist%C3%B6n_pystytys/#azure">Azure</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa1/01_ymp%C3%A4rist%C3%B6n_pystytys/#googlen-pilvipalvelu-gcp">Googlen pilvipalvelu (GCP)</a></li>
</ul></li>
    <li class="toctree-l2"><a class="nav-item" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa1/02_syv%C3%A4oppiminen/">Syväoppiminen</a></li>
    <li class="toctree-l2"><a class="nav-item" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa1/03_datan_muokkaus/">Datan muokkaus</a></li>
    <li class="toctree-l2"><a class="nav-item" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa1/04_neuroverkot/">Neuroverkot</a></li>
    <li class="toctree-l2"><a class="nav-item" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa1/05_tensorflow2/">Tensorflow 2</a></li>
</ul></li>
                    <li class="toctree-l1"><button class="section nav-item">Osa 2</button>
<ul class="subnav">
    <li class="toctree-l2"><a class="nav-item" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa2/01_keras/">Keras</a></li>
    <li class="toctree-l2"><a class="nav-item" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa2/02_konvoluutio/">Konvoluutioneuroverkko</a></li>
    <li class="toctree-l2"><a class="nav-item" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa2/03_regularisaatio/">Regularisaatio</a></li>
    <li class="toctree-l2"><a class="nav-item" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa2/04_siirto-oppiminen/">Siirto-oppiminen</a></li>
</ul></li>
                    <li class="toctree-l1"><button class="section nav-item">Osa 3</button>
<ul class="subnav">
    <li class="toctree-l2"><a class="nav-item" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa3/01_RNN_ja_LSTM/">RNN ja LSTM</a></li>
    <li class="toctree-l2"><a class="nav-item" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa3/02_NLP/">NLP</a></li>
    <li class="toctree-l2"><a class="nav-item" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa3/03_Aikasarjaennustaminen/">Aikasarjaennustaminen</a></li>
    <li class="toctree-l2"><a class="nav-item" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa3/04_Autoenkooderi/">Autoenkooderi</a></li>
</ul></li>
                    <li class="toctree-l1"><a class="nav-item" href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/tehtavat/">Tehtävät</a></li>
                </ul>
            </nav>
            <div class="repo">
    <div class="link">
        <a href="https://gitlab.labranet.jamk.fi/syvaoppiminen-avoin-amk/syvaoppiminen-materiaalit" class="icon icon-gitlab"> GitLab</a>
    </div>
    <div class="previous"><a href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/">« Previous</a></div>
    <div class="next"><a href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa1/02_syv%C3%A4oppiminen/">Next »</a></div>
</div>
        </aside>
        <div id="spacer"><button class="arrow"></button></div>
        <main>
            <div class="home-top">
                <button class="hamburger"></button>
                <a href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/" class="site-name"> Syväoppiminen</a>
            </div>
            <div id="main">
                <nav class="breadcrumbs">
<ul>
    <li>Osa 1</li>
</ul>
</nav>
                <div id="content"><h1 id="ympariston-pystytys">Ympäristön pystytys</h1>
<p>Ohjelmointiympäristöön tarvitaan:</p>
<ul>
<li>Python 3.6 tai uudempi</li>
<li>Tarvittavat Python kirjastot kuten Pandas, Tensorflow</li>
<li>Jupyter Notebook (tai Jupyter Lab)</li>
</ul>
<p>Aikaisemmissa kursseissa, kuten Datan esikäsittelyssä, on asennettu jo Python ympäristöjä ja käytetty pip - paketinhallintaa tarvittavien pakettien asennukseen. Alla olevat ohjeet ovat Anaconda - ympäristön luomista varten. Jos haluat asentaa paketit pip - paketinhallinnalla niin kuin aikaisemmin, käytä komentoa:</p>
<pre><code class="language-bash hljs">pip install pandas numpy matplotlib seaborn scikit-learn tensorflow
</code></pre>
<p>Voit jatkaa Jupyter Notebookin käyttämistä tämän jälkeen niin kuin aikaisemminkin.</p>
<h2 id="omalla-koneella">Omalla koneella</h2>
<p>Mitä enemmän dataa syväoppimisessa käsitellään, sitä enemmän vaaditaan laskentatehoa ja RAM - muistia. Suosituksena olisi olla vähintään 8 gigatavua RAM muistia käytettävissä.</p>
<p>Suosittelen ympäristön pystytykseen <a href="https://www.anaconda.com/">Anaconda</a> - paketinhallintaohjelmistoa. Paketinhallinta on mahdollista asentaa Windows, Linux ja macOS käyttöjärjestelmille.</p>
<h3 id="windows">Windows</h3>
<p><a href="https://repo.anaconda.com/miniconda/Miniconda3-latest-Windows-x86_64.exe">Lataa tästä osoitteesta Minicondan asennustiedosto</a>. Kun tiedosto on ladattu, aja se. Asenna Anaconda oletusasetuksilla, eli painele Next painiketta eteenpäin kunnes Anaconda on asentunut.</p>
<p>Tämän jälkeen voit avata Anaconda - ympäristön terminaalissa kirjoittamalla Windowsin hakuun "Anaconda Prompt". Jatka alaotsikkoon 'Anaconda' pakettien asennusohjeita varten.</p>
<h3 id="linux">Linux</h3>
<p>Linuxille asentaessa on mahdollista asentaa "Miniconda" versio, jossa ei tule mukana automaattisesti tiettyjä Python kirjastoja, joita Anacondassa tulee. Alla olevassa ohjeissa käytän Ubuntu 18.04 käyttöjärjestelmää esimerkkinä.</p>
<p>Lataa viimeisin Miniconda versio komennolla:</p>
<pre><code class="language-bash hljs">wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
</code></pre>
<p>Tämän jälkeen anna suoritusoikeudet asennusskriptille ja aja se:</p>
<pre><code class="language-bash hljs">chmod +x Miniconda3-latest-Linux-x86_64.sh
./Miniconda3-latest-Linux-x86_64.sh
</code></pre>
<p>Hyväksy kirjoittamalla 'yes', anna minicondan asentua oletussijaintiin. Alustetaan conda ympäristö vastaamalla "Do you wish the installer to initialize Miniconda3 by running conda init?" kysymykseen 'yes'. Tämän jälkeen otetaan anaconda ympäristö käyttöön käynnistämällä bash uudestaan komennolla:</p>
<pre><code class="language-bash hljs"><span class="hljs-built_in">source</span> ~/.bashrc
</code></pre>
<h3 id="anaconda">Anaconda</h3>
<p>Anacondalla voi luoda virtuaalisia ympäristöjä, joissa on käytössä vain kyseiseen virtuaaliseen ympäristöön asennetut paketit. Tämä on hyödyllistä, koska useat koneoppimisen kirjastot päivittyvät usein, jolloin vanhoilla versioilla kirjoitetut ohjelmointikoodit saattavat lakata toimimasta.</p>
<p>Anaconda virtuaaliympäristön voi viedä myös Jupyter Notebookkiin kerneliksi, jolloin notebookeissa pystyy käyttämään Anaconda - virtuaaliympäristöön asennettuja paketteja. Tästä syystä olisi kätevintä asentaa Jupyter suoraan Anacondan base-oletusympäristöön. Asennetaan myös <code>nb_conda_kernels</code> niminen paketti, joka vie Anacondassa luodut ympäristöt suoraan Jupyteriin kerneliksi:</p>
<pre><code class="language-bash hljs">conda install jupyter nb_conda_kernels
</code></pre>
<p>Lähdetään luomaan virtuaaliympäristöä. Alla oleva komento luo virtuaaliympäristön ja asentaa siihen kurssilla tarvittavat kirjastot:</p>
<pre><code class="language-bash hljs">conda create --name &lt;ympäristön nimi&gt; pandas numpy matplotlib seaborn ipykernel scikit-learn tensorflow
</code></pre>
<p><strong>Huom! Jos omistat Nvidian näytönohjaimen (GTX 960 tai uudempi), voit käyttää sen CUDA - ytimiä neuroverkkojen koulutuksen nopeuttamiseksi. Korvaa <code>tensorflow</code> kirjastolla <code>tensorflow-gpu=2.1</code></strong>
Varmista vielä, että asennattavien kirjastojen listassa on paketit <strong>cudatoolkit</strong> sekä <strong>cudnn</strong>. Jos näitä ei ole listassa, kokeile muita tensorflow-gpu versioita, esim. <code>tensorflow-gpu=2.2</code>.</p>
<p>Käynnistetään Jupyter Notebook - palvelin komennolla:</p>
<pre><code class="language-bash hljs">jupyter notebook
</code></pre>
<h3 id="docker">Docker</h3>
<p>Jos olet asentanut koneellesi <a href="https://docs.docker.com/get-docker/">Dockerin</a>, voit luoda Jupyter Notebook ympäristön helposti konttiin ja käyttää sitä selaimen kautta. Luo Dockerfile:</p>
<pre><code class="language-Dockerfile">FROM continuumio/miniconda3
RUN conda install jupyter pandas numpy matplotlib seaborn ipykernel scikit-learn tensorflow -y --quiet
RUN mkdir /opt/notebooks
CMD ["jupyter","notebook","--notebook-dir=/opt/notebooks","--ip='0.0.0.0'","--port=8888","--no-browser","--allow-root"]
</code></pre>
<p>ja rakenna tästä image komennolla:</p>
<pre><code class="language-bash hljs">docker build -t jupyter_notebook .
</code></pre>
<p>tämän jälkeen voit käynnistää kontin komennolla:</p>
<pre><code class="language-bash hljs">docker run -ti -p 8888:8888 --name jupyter jupyter_notebook
</code></pre>
<p>Komentoriville pitäisi tulostua kaksi linkkiä, jos pyörität Dockeria omalla koneella, kopioi <code>127.0.0.1</code> IP-osoitteen sisältävän linkki selaimeesi, jolloin pääset käyttämään Jupyter Notebook ympäristöä.</p>
<h2 id="azure">Azure</h2>
<p>JAMKin opiskelijoille on saatavilla 100 dollaria krediittejä Azuren pilvipalveluun. Mene osoitteeseen https://aka.ms/student, paina "Activate Now" ja kirjaudu sisään JAMKin tunnuksilla. Kun olet syöttänyt tarpeelliset tiedot, pääset Azuren etusivulle, jossa on mahdollisuus periä krediitit "Redeem student credits" kohdasta.</p>
<p>Virtuaalikoneet löydät kirjoittamalla ylhäällä olevaan hakupalkkiin "virtual machines", paina vasemmalta ylhäältä "Add" ja "Virtual Machine". Anna koneelle nimi ja valitse imageksi "Ubuntu 18.04". Size kohtaan kannattaa valita kone, jossa on vähintään 16 GB RAM - muistia. Luo virtuaalikone painamalla "Review &amp; Create". Lataa ssh - avain koneellesi, tämän avulla pääset muodostamaan etäyhteyden virtuaalikoneeseen. Odota, että koneen luonti valmistuu. </p>
<p>Lataa etäyhteyden muodostamista varten esim. PuTTy tai ota OpenSSH käyttöön Windowsista noudattamalla <a href="https://www.howtogeek.com/336775/how-to-enable-and-use-windows-10s-built-in-ssh-commands/">näitä ohjeita</a>. Jos olet asentanut koneellesi Anacondan, niin sen mukana tulee myös openSSH ohjelma. </p>
<p>Valitse Azuresta koneesi, paina "Connect" ja kirjoita aikaisemmin lataamasi ssh-avaimen sijainti levylläsi. Azure antaa sinulle komennon, jonka kopioimalla komentoriville saat etäyhteyden virtuaalikoneelle.</p>
<p>Lisätään vielä palomuuriin sääntö, joka sallii Jupyter Notebook yhteyden. Valitse virtuaalikone ja paina vasemmalta "Networking". Paina oikealta "Add inbound port rule" ja täytä kenttään "Destination port ranges" 8888, "Protocol" kenttään TCP ja paina Add.</p>
<p>Etene tästä eteenpäin alempana olevan otsikon "Anaconda ja Jupyter virtuaalikoneen Ubuntuun" alta ohjeiden mukaisesti.</p>
<h2 id="googlen-pilvipalvelu-gcp">Googlen pilvipalvelu (GCP)</h2>
<p>Avaa <a href="https://console.cloud.google.com/">Google Cloud Console</a>. Yläpalkissa otsikon "Google Cloud Platform" oikealta puolelta voit luoda projektin kurssia varten painamalla "New Project". Anna projektille nimi, Location kenttään ei tarvitse määrittää mitään, paina Create. </p>
<p>Valitse äsken luomasi projekti taas otsikon "Google Cloud Platform" oikealta puolelta. Jotta voit käyttää projektissa krediittejä, avaa menu "Google Cloud Platform" otsikosta vasemmalta. Paina "Billing" ja "Link a billing account". Tämän pitäisi ehdottaa Deep Learning - billing accounttia, paina Set Account.</p>
<p>Kun Billing Account on linkitetty, voidaan lähteä luomaan itse virtuaalikoneita. Virtuaalikoneen voi luoda valitsemalta vasemmalta ylhäältä menun kautta Compute Engine &gt; VM Instances</p>
<p><img alt="" src="./Ympäristön pystytys — Syväoppiminen_files/compute_engine.png" style="height:30%;width:50%;display:block;margin-left:auto;margin-right:auto;"></p>
<p>Valitkaa ylhäältä "Create Instance"</p>
<ul>
<li>Antakaa virtuaalikoneelle nimeksi opiskelijatunnuksenne "Name" kenttään</li>
<li>Valitkaa "Machine type" valikosta n1-standard-4</li>
<li>Painatkaa Boot disk kohdasta Change, valitkaa listasta Ubuntu 18.04, laittakaa myös alhaalta lisää tilaa Size (GB) kenttään</li>
<li>Firewall kohtaan ruksit molempiin: Allow HTTP traffic ja Allow HTTPS traffic</li>
</ul>
<p>Tulisi näyttää tältä, luokaa virtuaalikone painamalla Create</p>
<p><img alt="" src="./Ympäristön pystytys — Syväoppiminen_files/vm_luonti.png" style="height:30%;width:50%;display:block;margin-left:auto;margin-right:auto;"></p>
<p>Google alkaa luomaan virtuaalikonetta, odotellessa voimme muokata staattisen IP-osoitteen kohdilleen</p>
<p>Valitkaa vasemmalta ylhäältä taas menu, kelatkaa alaspäin kunnes tulee vastaan otsikko "Networking" josta VPC network &gt; External IP addresses</p>
<p><img alt="" src="./Ympäristön pystytys — Syväoppiminen_files/vpc_network.png" style="height:30%;width:50%;display:block;margin-left:auto;margin-right:auto;"></p>
<p>Vaihtakaa virtuaalikoneen osoite staattiseksi. Etsikää listasta oman opiskelijatunnuksen perusteella koneen IP-osoite, klikatkaa Ephemeral tekstiä ja vaihtakaa siihen "Static"</p>
<p><img alt="" src="./Ympäristön pystytys — Syväoppiminen_files/static_ip.png" style="height:30%;width:50%;display:block;margin-left:auto;margin-right:auto;"></p>
<p>Kirjoittakaa uuteen ikkunaan nimeksi opiskelijatunnuksenne.</p>
<p>Luodaan vielä palomuurisääntö, jolla sallimme liikenteen Jupyter Notebookkiin. Valitaan ylhäältä menusta VPC network &gt; Firewall rules. Klikatkaa ylhäältä Create Firewall Rule. Kirjoittakaa ensimmäiseen Name kenttään säännölle nimi, esim. 'allow-jupyter'. Täyttäkää loput kentät alla olevan kuvan mukaisesti.</p>
<p><img alt="" src="./Ympäristön pystytys — Syväoppiminen_files/firewall_rule.png" style="height:30%;width:50%;display:block;margin-left:auto;margin-right:auto;"></p>
<p>Tämän jälkeen painakaa alhaalta Create.</p>
<p>Käynnistetään nyt itse virtuaalikone, mennään takaisin vasemmalta ylhäältä menusta Compute Engine &gt; VM Instances</p>
<h3 id="anaconda-ja-jupyter-virtuaalikoneen-ubuntuun">Anaconda ja Jupyter virtuaalikoneen Ubuntuun</h3>
<p>Ottakaa SSH yhteys virtuaalikoneeseen painamalla SSH painiketta</p>
<p>Lataa viimeisin miniconda versio komennolla:</p>
<pre><code class="language-bash hljs">wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
</code></pre>
<p>Tämän jälkeen anna suoritusoikeudet asennusskriptille ja aja se:</p>
<pre><code class="language-bash hljs">chmod +x Miniconda3-latest-Linux-x86_64.sh
./Miniconda3-latest-Linux-x86_64.sh
</code></pre>
<p>Hyväksy kirjoittamalla 'yes', anna minicondan asentua oletussijaintiin. Alustetaan conda ympäristö vastaamalla "Do you wish the installer to initialize Miniconda3 by running conda init?" kysymykseen 'yes'. Tämän jälkeen otetaan anaconda ympäristö käyttöön käynnistämällä bash uudestaan komennolla:</p>
<pre><code class="language-bash hljs"><span class="hljs-built_in">source</span> ~/.bashrc
</code></pre>
<p>Jotta Jupyter palvelimelle saataisiin suojattu HTTPS yhteys, tulee luoda itseallekirjoitetut sertifikaatit. Luokaa sertifikaateille kansio, vaihtakaa kansioon ja luokaa itse sertifikaatit alla olevilla komennoilla. Sertifikaatille tulee myös määritellä oikeudet chmod - kommennolla. Käyttäjätunnus, jota tarvitaan chown - komennossa, näkyy komentorivillä ennen @ - merkkiä.</p>
<p><img alt="" src="./Ympäristön pystytys — Syväoppiminen_files/tunnus.png" style="height:30%;width:50%;display:block;margin-left:auto;margin-right:auto;"></p>
<pre><code class="language-bash hljs">mkdir certificates
<span class="hljs-built_in">cd</span> certificates
sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout selfsigned.key -out selfsigned.crt
sudo chown &lt;käyttäjätunnus&gt;:&lt;käyttäjätunnus&gt; selfsigned.key selfsigned.crt
sudo chmod 775 selfsigned.key selfsigned.crt
<span class="hljs-built_in">cd</span> ..
</code></pre>
<p>Sertifikaatin luonnissa ei tarvitse syöttää tietoja, vaan ne voi ohittaa painamalla enteriä.</p>
<p>Toisin kuin Anacondassa, Minicondassa ei tule Jupyter Notebookkia oletuksena mukana. Voit asentaa Jupyterin komennolla:</p>
<pre><code class="language-bash hljs">conda install jupyter
</code></pre>
<p>Jupyter Notebook - palvelimen konfiguraatiotiedoston voi luoda komennolla:</p>
<pre><code class="language-bash hljs">jupyter notebook --generate-config
</code></pre>
<p>Olisi tarpeellista lukita Jupyter Notebook palvelimen käyttö salasanan taakse, sillä se sijaitsee julkisessa IP-osoitteessa. IPythonin kirjastossa on valmis funktio, joka tulostaa tarkastussumman salasanasta. <strong>Huom! Ota salasanan hash ylös, se laitetaan myöhemmin Jupyterin konfiguraatiotiedostoon</strong></p>
<pre><code class="language-bash hljs">ipython
from IPython.lib import passwd
passwd()
Syötä salasana, laita se muistiin ja tulosteena saatu salasanan <span class="hljs-built_in">hash</span>
<span class="hljs-built_in">exit</span>
</code></pre>
<p>Samaa funktiota voi käyttää myös luomaan salasanan uudestaan, jos sen unohtaa.</p>
<p>Seuraavaksi määritetään konfiguraatiotiedostoon sertifikaatin polku, palvelimen IP-osoite ja portti. Avaan tiedoston nano - editorilla, voitte käyttää minkä tunnette parhaiten.</p>
<pre><code class="language-bash hljs">nano .jupyter/jupyter_notebook_config.py
</code></pre>
<p>Kirjoitetaan alla olevat rivit. <strong>Huom! Sertifikaattipolun määritykseen tarvitsette sertifikaatin absoluuttisen polun. Jos olette tehneet ohjeen mukaisesti, niin tarvitsee polkuun syöttää oma käyttäjätunnus</strong></p>
<pre><code class="hljs python">c = get_config()
c.NotebookApp.keyfile = <span class="hljs-string">u'/home/&lt;käyttäjätunnus&gt;/certificates/selfsigned.key'</span>
c.NotebookApp.certfile = <span class="hljs-string">u'/home/&lt;käyttäjätunnus&gt;/certificates/selfsigned.crt'</span>
c.NotebookApp.ip = <span class="hljs-string">'*'</span>
c.NotebookApp.open_browser = <span class="hljs-keyword">False</span>
c.NotebookApp.port = <span class="hljs-number">8888</span>
c.NotebookApp.password = <span class="hljs-string">u'&lt;aikaisemmin kopioitu salasanan hash tähän&gt;'</span>
</code></pre>
<p>Nyt voidaan käynnistää Jupyter Notebook - palvelin yksinkertaisesti komennolla</p>
<pre><code class="language-bash hljs">jupyter notebook
</code></pre>
<p>Jos haluat Jupyterin pyörimään taustalla ja käyttää terminaalia normaalisti muuten, kirjoita:</p>
<pre><code class="language-bash hljs">nohup jupyter notebook &amp;
</code></pre>
<p>Nyt tarvitsette virtuaalikoneen ulkoisen IP-osoitteen, eli external IP.
<img alt="" src="./Ympäristön pystytys — Syväoppiminen_files/external_ip.png" style="height:30%;width:50%;display:block;margin-left:auto;margin-right:auto;"></p>
<p>Kirjoittakaa selaimen osoitepalkkiin https://"ulkoinen ip osoite":8888</p>
<p>Tämän jälkeen pitäisi ilmestyä varoitus siitä, että sertifikaatti ei ole luotettu. Hyväksykää sertifikaatti. Esim. Chromessa tämä onnistuu painamalla "Advanced" painiketta ja sen jälkeen "Proceed to "ip osoite""</p>
<p><img alt="" src="./Ympäristön pystytys — Syväoppiminen_files/cert.png" style="height:30%;width:50%;display:block;margin-left:auto;margin-right:auto;"></p>
<p>Tämän jälkeen pitäisi avautua Jupyter Notebook palvelimen sivut, joissa kysytään salasanaa. </p>
<p><img alt="" src="./Ympäristön pystytys — Syväoppiminen_files/jupyter.png" style="height:30%;width:50%;display:block;margin-left:auto;margin-right:auto;"></p>
<p>Asenna tämän jälkeen tarvittavat Python kirjastot yllä olevan Anaconda - aliotsikon ohjeiden mukaisesti.</p></div>
                <footer>
    <div class="footer-buttons">
        <div class="previous"><a href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/" title="Kurssin tiedot"><span>Previous</span></a></div>
        <div class="next"><a href="https://syvaoppiminen-ttow1400-3001.pages.labranet.jamk.fi/syvaoppiminen-materiaalit/materiaalit/osa1/02_syv%C3%A4oppiminen/" title="Syväoppiminen"><span>Next</span></a></div>
    </div>
    <div class="footer-note">
        <p>
            Built with <a href="http://www.mkdocs.org/">MkDocs</a> using
            <a href="https://github.com/daizutabi/mkdocs-ivory">Ivory theme</a>.
        </p>
    </div>
</footer>
            </div>
        </main>
    </div>
    <script>var base_url = '../../..';</script>
    <script src="./Ympäristön pystytys — Syväoppiminen_files/theme.js.download"></script>
    <script src="./Ympäristön pystytys — Syväoppiminen_files/main.js.download"></script>


</body></html>